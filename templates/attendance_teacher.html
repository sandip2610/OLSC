<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Attendance</title>
    <style>
        body {font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background-color: #f4f6f8;margin: 0;padding: 20px;}
        h2 {text-align: center;color: #333;margin-bottom: 20px;}
        table {width: 100%;border-collapse: collapse;background-color: #fff;box-shadow: 0 4px 12px rgba(0,0,0,0.1);border-radius: 2px;overflow: hidden;}
        th, td {padding: 12px 15px;text-align: center;}
        th {background-color: lightblue;color: black;text-transform: uppercase;letter-spacing: 0.05em;}
        tr:nth-child(even) {background-color: #f9f9f9;}
        tr:hover {background-color: #f1f1f1;transition: background 0.3s;}
        input[type="radio"] {width: 18px;height: 18px;cursor: pointer;}
        #saveBtn {margin-top: 20px;padding: 10px 20px;background-color: #4CAF50;color: #fff;border: none;border-radius: 5px;cursor: pointer;font-size: 16px;transition: background 0.3s, transform 0.2s;}
        #saveBtn:hover {background-color: #45a049;transform: scale(1.05);}
    </style>
</head>
<body>
{% extends "base.html" %}
{% block title %}Smart School{% endblock %}
{% block content %}
<h2>Attendance for {{ today_date }}</h2>
<form method="POST" id="attendanceForm">
    {% csrf_token %}
    <table>
        <tr>
            <th>Registration Id</th>
            <th>Student</th>
            <th>Present</th>
            <th>Absent</th>
        </tr>
        {% for student, status in attendance_status_list %}
            {% if not student.is_teacher and not student.is_librarian %}
            <tr>
                <td>{{ student.id }}</td>
                <td>{{ student.name }}</td>
                <td>
                    <input type="radio" name="status_{{ student.id }}" value="Present"
                    {% if status == 'Present' %}checked{% endif %} class="attendanceRadio"/>
                </td>
                <td>
                    <input type="radio" name="status_{{ student.id }}" value="Absent"
                    {% if status != 'Present' %}checked{% endif %} class="attendanceRadio"/>
                </td>
            </tr>
            {% endif %}
        {% endfor %}
    </table>
    <button type="submit" id="saveBtn" style="display:none;">Save Attendance</button>
</form>
<script>
    const radios = document.querySelectorAll('.attendanceRadio');
    const saveBtn = document.getElementById('saveBtn');
    radios.forEach(radio => {
        radio.addEventListener('change', () => {
            saveBtn.style.display = 'inline-block';
        });
    });
</script>
{% endblock %}
</body>
</html>